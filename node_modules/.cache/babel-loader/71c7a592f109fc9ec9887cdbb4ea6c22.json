{"ast":null,"code":"import _toConsumableArray from \"/home/lhk/web3-practice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/home/lhk/web3-practice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lhk/web3-practice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/lhk/web3-practice/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/lhk/web3-practice/src/components/Create.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connectWallet, getCurrentWalletConnected, mintNFT } from \"../utils/interact.js\";\nimport Web3 from 'web3';\nimport erc721Abi from \"../erc721Abi\";\nimport TokenList from \"./TokenList\";\n\nvar Create = function Create(props) {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      walletAddress = _useState2[0],\n      setWallet = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      status = _useState4[0],\n      setStatus = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      name = _useState6[0],\n      setName = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      description = _useState8[0],\n      setDescription = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      url = _useState10[0],\n      setURL = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      erc721list = _useState12[0],\n      setErc721list = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      newErc721addr = _useState14[0],\n      setNewErc721Addr = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      NFTlist = _useState16[0],\n      setNFTlist = _useState16[1];\n\n  var _useState17 = useState(''),\n      _useState18 = _slicedToArray(_useState17, 2),\n      img = _useState18[0],\n      setImg = _useState18[1];\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _yield$getCurrentWall, address, status;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return getCurrentWalletConnected();\n\n          case 2:\n            _yield$getCurrentWall = _context.sent;\n            address = _yield$getCurrentWall.address;\n            status = _yield$getCurrentWall.status;\n            setWallet(address);\n            setStatus(status);\n            addWalletListener();\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n\n  var _useState19 = useState(),\n      _useState20 = _slicedToArray(_useState19, 2),\n      web3 = _useState20[0],\n      setWeb3 = _useState20[1];\n\n  useEffect(function () {\n    if (typeof window.ethereum !== \"undefined\") {\n      // window.ethereumÏù¥ ÏûàÎã§Î©¥\n      try {\n        var web = new Web3(window.ethereum); // ÏÉàÎ°úÏö¥ web3 Í∞ùÏ≤¥Î•º ÎßåÎì†Îã§\n\n        setWeb3(web);\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }, []);\n\n  function addWalletListener() {\n    if (window.ethereum) {\n      window.ethereum.on(\"accountsChanged\", function (accounts) {\n        if (accounts.length > 0) {\n          setWallet(accounts[0]);\n          setStatus(\"üëÜüèΩ Write a message in the text-field above.\");\n        } else {\n          setWallet(\"\");\n          setStatus(\"ü¶ä Connect to Metamask using the top right button.\");\n        }\n      });\n    } else {\n      setStatus( /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }\n      }, \" \", \"\\uD83E\\uDD8A\", \" \", /*#__PURE__*/React.createElement(\"a\", {\n        target: \"_blank\",\n        href: \"https://metamask.io/download.html\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }\n      }, \"You must install Metamask, a virtual Ethereum wallet, in your browser.\")));\n    }\n  }\n\n  var connectWalletPressed = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var walletResponse;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return connectWallet();\n\n            case 2:\n              walletResponse = _context2.sent;\n              setStatus(walletResponse.status);\n              setWallet(walletResponse.address);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function connectWalletPressed() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onMintPressed = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var _yield$mintNFT, success, status;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return mintNFT(url, name, description);\n\n            case 2:\n              _yield$mintNFT = _context3.sent;\n              success = _yield$mintNFT.success;\n              status = _yield$mintNFT.status;\n              setStatus(status);\n\n              if (success) {\n                setName(\"\");\n                setDescription(\"\");\n                setURL(\"\");\n              }\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onMintPressed() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var addNewErc721Token = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var tokenContract, name, symbol, totalSupply, addr, arr, i, _loop, _i, _arr;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return new web3.eth.Contract(erc721Abi, newErc721addr);\n\n            case 2:\n              tokenContract = _context5.sent;\n              _context5.next = 5;\n              return tokenContract.methods.name().call();\n\n            case 5:\n              name = _context5.sent;\n              _context5.next = 8;\n              return tokenContract.methods.symbol().call();\n\n            case 8:\n              symbol = _context5.sent;\n              _context5.next = 11;\n              return tokenContract.methods.totalSupply().call();\n\n            case 11:\n              totalSupply = _context5.sent;\n              addr = newErc721addr;\n              arr = [];\n\n              for (i = 1; i <= totalSupply; i++) {\n                arr.push(i);\n              }\n\n              _loop = /*#__PURE__*/_regeneratorRuntime.mark(function _loop() {\n                var tokenId, tokenOwner, tokenURI;\n                return _regeneratorRuntime.wrap(function _loop$(_context4) {\n                  while (1) {\n                    switch (_context4.prev = _context4.next) {\n                      case 0:\n                        tokenId = _arr[_i];\n                        _context4.next = 3;\n                        return tokenContract.methods.ownerOf(tokenId).call();\n\n                      case 3:\n                        tokenOwner = _context4.sent;\n\n                        if (!(String(tokenOwner).toLowerCase() === walletAddress)) {\n                          _context4.next = 9;\n                          break;\n                        }\n\n                        _context4.next = 7;\n                        return tokenContract.methods.tokenURI(tokenId).call();\n\n                      case 7:\n                        tokenURI = _context4.sent;\n                        setErc721list(function (prevState) {\n                          return [].concat(_toConsumableArray(prevState), [{\n                            name: name,\n                            symbol: symbol,\n                            tokenId: tokenId,\n                            tokenURI: tokenURI,\n                            addr: addr\n                          }]);\n                        });\n\n                      case 9:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }\n                }, _loop);\n              });\n              _i = 0, _arr = arr;\n\n            case 17:\n              if (!(_i < _arr.length)) {\n                _context5.next = 22;\n                break;\n              }\n\n              return _context5.delegateYield(_loop(), \"t0\", 19);\n\n            case 19:\n              _i++;\n              _context5.next = 17;\n              break;\n\n            case 22:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function addNewErc721Token() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Minter\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    id: \"walletButton\",\n    onClick: connectWalletPressed,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, walletAddress.length > 0 ? \"Connected: \" + String(walletAddress).substring(0, 6) + \"...\" + String(walletAddress).substring(38) : /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, \"Connect Wallet\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    id: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, \"\\uD83E\\uDDD9\\u200D\\u2642\\uFE0F Alchemy NFT Minter\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, \"Simply add your asset's link, name, and description, then press \\\"Mint.\\\"\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, \"\\uD83D\\uDDBC Link to asset: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"e.g. https://gateway.pinata.cloud/ipfs/<hash>\",\n    onChange: function onChange(event) {\n      return setURL(event.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, \"\\uD83E\\uDD14 Name: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"e.g. My first NFT!\",\n    onChange: function onChange(event) {\n      return setName(event.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, \"\\u270D\\uFE0F Description: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"e.g. Even cooler than cryptokitties ;)\",\n    onChange: function onChange(event) {\n      return setDescription(event.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"mintButton\",\n    onClick: onMintPressed,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, \"Mint NFT\"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"status\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, status), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newErc721\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: function onChange(e) {\n      setNewErc721Addr(e.target.value); // ÏûÖÎ†•Î∞õÏùÑ ÎïåÎßàÎã§ newErc721addr Í∞±Ïã†\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: addNewErc721Token,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, \"add new erc721\")), /*#__PURE__*/React.createElement(TokenList, {\n    web3: web3,\n    account: walletAddress,\n    erc721list: erc721list,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Create;","map":{"version":3,"sources":["/home/lhk/web3-practice/src/components/Create.js"],"names":["React","useEffect","useState","connectWallet","getCurrentWalletConnected","mintNFT","Web3","erc721Abi","TokenList","Create","props","walletAddress","setWallet","status","setStatus","name","setName","description","setDescription","url","setURL","erc721list","setErc721list","newErc721addr","setNewErc721Addr","NFTlist","setNFTlist","img","setImg","address","addWalletListener","web3","setWeb3","window","ethereum","web","err","console","log","on","accounts","length","connectWalletPressed","walletResponse","onMintPressed","success","addNewErc721Token","eth","Contract","tokenContract","methods","call","symbol","totalSupply","addr","arr","i","push","tokenId","ownerOf","tokenOwner","String","toLowerCase","tokenURI","prevState","substring","event","target","value","e"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connectWallet, getCurrentWalletConnected, mintNFT, } from \"../utils/interact.js\";\nimport Web3 from 'web3';\nimport erc721Abi from \"../erc721Abi\"\nimport TokenList from \"./TokenList\";\n\n\nconst Create = (props) => {\n\n  const [walletAddress, setWallet] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [url, setURL] = useState(\"\");\n  const [erc721list, setErc721list] = useState([]);\n  const [newErc721addr, setNewErc721Addr] = useState();\n  const [NFTlist, setNFTlist] = useState([]);\n  const [img, setImg] = useState('')\n\n  useEffect(async () => {\n    //State variables\n    //TODO: implement\n    const { address, status } = await getCurrentWalletConnected();\n    setWallet(address)\n    setStatus(status);\n\n    addWalletListener();\n  }, []);\n\n  const [web3, setWeb3] = useState();\n  useEffect(() => {\n    if (typeof window.ethereum !== \"undefined\") { // window.ethereumÏù¥ ÏûàÎã§Î©¥\n      try {\n        const web = new Web3(window.ethereum);  // ÏÉàÎ°úÏö¥ web3 Í∞ùÏ≤¥Î•º ÎßåÎì†Îã§\n        setWeb3(web);\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }, []);\n\n\n  function addWalletListener() {\n    if (window.ethereum) {\n      window.ethereum.on(\"accountsChanged\", (accounts) => {\n        if (accounts.length > 0) {\n          setWallet(accounts[0]);\n          setStatus(\"üëÜüèΩ Write a message in the text-field above.\");\n        } else {\n          setWallet(\"\");\n          setStatus(\"ü¶ä Connect to Metamask using the top right button.\");\n        }\n      });\n    } else {\n      setStatus(\n        <p>\n          {\" \"}\n          ü¶ä{\" \"}\n          <a target=\"_blank\" href={`https://metamask.io/download.html`}>\n            You must install Metamask, a virtual Ethereum wallet, in your\n            browser.\n          </a>\n        </p>\n      );\n    }\n  }\n\n  const connectWalletPressed = async () => { //TODO: implement\n    const walletResponse = await connectWallet();\n    setStatus(walletResponse.status);\n    setWallet(walletResponse.address);\n  };\n\n  const onMintPressed = async () => { //TODO: implement\n    const { success, status } = await mintNFT(url, name, description);\n    setStatus(status);\n    if (success) {\n      setName(\"\");\n      setDescription(\"\");\n      setURL(\"\");\n    }\n  };\n  const addNewErc721Token = async () => {\n    const tokenContract = await new web3.eth.Contract(\n      erc721Abi,\n      newErc721addr\n    );\n    const name = await tokenContract.methods.name().call();\n    const symbol = await tokenContract.methods.symbol().call();\n    const totalSupply = await tokenContract.methods.totalSupply().call();\n    const addr = newErc721addr;\n\n    let arr = [];\n    for (let i = 1; i <= totalSupply; i++) {\n      arr.push(i);\n    }\n    for (let tokenId of arr) {\n      let tokenOwner = await tokenContract.methods\n        .ownerOf(tokenId)\n        .call();\n      if (String(tokenOwner).toLowerCase() === walletAddress) {\n        let tokenURI = await tokenContract.methods\n          .tokenURI(tokenId)\n          .call();\n        setErc721list((prevState) => {\n          return [...prevState, { name, symbol, tokenId, tokenURI, addr }];\n        });\n      }\n    }\n\n  }\n\n  return (\n    <div className=\"Minter\">\n      <button id=\"walletButton\" onClick={connectWalletPressed}>\n        {walletAddress.length > 0 ? (\n          \"Connected: \" +\n          String(walletAddress).substring(0, 6) +\n          \"...\" +\n          String(walletAddress).substring(38)\n        ) : (\n          <span>Connect Wallet</span>\n        )}\n      </button>\n\n      <br></br>\n      <h1 id=\"title\">üßô‚Äç‚ôÇÔ∏è Alchemy NFT Minter</h1>\n      <p>\n        Simply add your asset's link, name, and description, then press \"Mint.\"\n      </p>\n      <form>\n        <h2>üñº Link to asset: </h2>\n        <input\n          type=\"text\"\n          placeholder=\"e.g. https://gateway.pinata.cloud/ipfs/<hash>\"\n          onChange={(event) => setURL(event.target.value)}\n        />\n        <h2>ü§î Name: </h2>\n        <input\n          type=\"text\"\n          placeholder=\"e.g. My first NFT!\"\n          onChange={(event) => setName(event.target.value)}\n        />\n        <h2>‚úçÔ∏è Description: </h2>\n        <input\n          type=\"text\"\n          placeholder=\"e.g. Even cooler than cryptokitties ;)\"\n          onChange={(event) => setDescription(event.target.value)}\n        />\n      </form>\n      <button id=\"mintButton\" onClick={onMintPressed}>\n        Mint NFT\n      </button>\n      <p id=\"status\">\n        {status}\n      </p>\n      <div className=\"newErc721\">\n        <input\n          type=\"text\"\n          onChange={(e) => {\n            setNewErc721Addr(e.target.value);\n            // ÏûÖÎ†•Î∞õÏùÑ ÎïåÎßàÎã§ newErc721addr Í∞±Ïã†\n          }}\n        ></input>\n        <button onClick={addNewErc721Token}>add new erc721</button>\n      </div>\n      <TokenList web3={web3} account={walletAddress} erc721list={erc721list} />\n    </div>\n  );\n};\n\nexport default Create;"]},"metadata":{},"sourceType":"module"}